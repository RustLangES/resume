---
import image1 from "../../public/rust_book.png";
import image2 from "../../public/road_map.png";
import Clickable from "../components/Clickable.astro";
import Section from "@layouts/section.astro";
import { readTOMLFiles } from "../utils/readProjects";

interface Project {
  name: string[];
  description: string;
  link: string;
  brand_src: string;
  button_text: string;
  button_link: string;
  brand_as_letter: boolean;
  button_bg_color: string;
}

const prebuiltData = await readTOMLFiles("proyectos-comunitarios/proyectos");
---

<style>
  #projects-container:hover {
    animation-play-state: paused;
  }
</style>

<div
  class="flex flex-col justify-center mt-3 items-center gap-2 h-[100px] sec z-10"
>
  <h3 class="text-[30px]">AQUÍ</h3>
  <h2 class="text-orange-600 text-[50px]">PODRAS</h2>
</div>
<Section type="TitleOrange" height="[70vh]">
  <div
    slot="content"
    class="flex justify-center items-center w-full h-full mt-6"
  >
    <img
      src={image1.src}
      alt="Captura del libro de rust en español"
      class="flex-grow z-10 p-[20px] mb-[40px] w-72 h-[200px] lg:w-80 md:w-96"
    />
    <img
      src={image2.src}
      alt="Captura del roadmap de la comunidad"
      class="flex-grow p-[20px] ml-[-50%] mt-[40px] z-10 w-72 h-[200px] lg:w-96"
    />
  </div>
</Section>
<Section title="Aprender">
  <Fragment slot="content">
    <!-- First row -->
    <div class="flex justify-center items-center gap-8">
      <Clickable>Roadmap</Clickable>
      <Clickable className="mt-[50px]">El Libro</Clickable>
    </div>

    <!-- Second row -->
    <div class="flex justify-center items-center gap-8">
      <Clickable>Rust para c# Developers</Clickable>
      <Clickable className="mt-[50px]">Mas</Clickable>
    </div>
  </Fragment>
</Section>
<Section title="Conectar" subtitle="y ser parte">
  <div
    slot="content"
    class="flex flex-col justify-center items-center mx-6 h-[50vh]"
  >
    <iframe
      title="Discord server"
      src="https://discord.com/widget?id=778674594856960012&theme=dark"
      width="350"
      height="500"
      allowtransparency="true"
      frameborder="0"
      sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
    ></iframe>
  </div>
</Section>

<Section title="Compartir" subtitle="Tus Proyectos">
  <Fragment slot="content">
    <div
      class="w-screen
    min-h-[280px]
    h-[30vh]
    inline-flex
    flex-nowrap overflow-hidden
[mask-image:_linear-gradient(to_right,transparent_0,_black_32px,_black_calc(100%-32px),transparent_100%)]"
    >
      <ul
        class="flex
    items-center
    justify-center
    animate-infinite-scroll
    p-5"
        id="projects-container"
      >
        {
          [...prebuiltData, ...prebuiltData].map((project: Project) => {
            if (project.button_text.length > 0)
              return (
                <Clickable
                  className="relative flex flex-col mx-3 w-[85vw] h-full flex-shrink-0 p-2"
                  justify="normal"
                >
                  {project.brand_as_letter ? (
                    <p class="flex flex-row justify-center items-center h-14 w-14 rounded-full self-start bg-[#ffedd5]">
                      {project.brand_src}
                    </p>
                  ) : (
                    <img
                      alt="icon"
                      src={`project-assets/${project.brand_src.substring(2)}`}
                      class="h-14 w-14 rounded-full self-start"
                    />
                  )}

                  <p class="font-bold  self-start">{project.name.join(" ")}</p>
                  <p class="text-black text-pretty">{project.description}</p>
                  <a
                    href={project.button_link}
                    target="_blank"
                    class="self-start absolute bottom-0 mb-2"
                  >
                    <Clickable>{project.button_text}</Clickable>
                  </a>
                </Clickable>
              );
          })
        }
      </ul>
    </div>

    <!-- TODO: set href -->
    <a href="">
      <Clickable className="text-1xl p-2"> Publica </Clickable>
    </a>
  </Fragment>
</Section>

<Section
  title="Crear"
  subtitle="Sin Limites"
  description="Quizas Todavia te preguntes Que Puedes Crear con Rust, La Respuesta Corta, Todo Lo Que Quieras."
  height="[80vh]"
  className="z-10"
>
  <div slot="content" class="flex flex-col justify-center items-center">
    <div class="flex justify-center items-center gap-10">
      <Clickable>Servicios</Clickable>
      <Clickable className="mt-[50px]">Aplicaciones Multiplataforma</Clickable>
    </div>
    <div class="flex justify-center items-center gap-10">
      <Clickable>Videojuegos</Clickable>
      <Clickable className="mt-[50px]">Inteligencia Artificial</Clickable>
    </div>
    <div class="mt-10 justify-center items-center">
      <Clickable>Y mucho, mucho mas</Clickable>
    </div>
  </div>
</Section>
